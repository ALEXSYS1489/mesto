(()=>{"use strict";var e=document.querySelector(".profile__edit-button"),t=document.querySelector(".popup_type_edit"),n=t.querySelector(".popup__form"),r=t.querySelector(".popup__input_value_name"),o=t.querySelector(".popup__input_value_about"),i=document.querySelector(".profile__name"),u=document.querySelector(".profile__about"),c=document.querySelector(".elements"),a=document.querySelector("#element-template").content.querySelector(".element"),s=document.querySelector(".profile__add-button"),l=document.querySelector(".popup_type_add"),f=l.querySelector(".popup__form"),p=document.querySelector(".popup_type_image"),h=document.querySelector(".popup_type_avatar"),_=h.querySelector(".popup__form"),d=document.querySelector(".profile__avatar-button"),y=document.querySelector(".profile__image"),v=document.querySelector(".popup_type_confirm"),b={},m={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_active",inputErrorClass:"popup__input_error",errorClass:"popup__error_active",popupErrorType:".popup__error_type_"};function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n,r,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._user=n,this._name=t.name,this._link=t.link,this._likes=t.likes,this._template=r,this._handleCardClick=o,this._handleClickDelete=i,this._handleClickLike=u}var t,n;return t=e,(n=[{key:"createElement",value:function(){var e=this;return this.card=this._template.cloneNode(!0),this._elementImage=this.card.querySelector(".element__image"),this._elementName=this.card.querySelector(".element__name"),this._elementLikes=this.card.querySelector(".element__likes"),this._elementName.textContent=this._name,this._elementImage.setAttribute("src",this._link),this._elementImage.setAttribute("alt",this._name),this._elementButtonDel=this.card.querySelector(".element__remove"),this._elementButtonLike=this.card.querySelector(".element__like"),this._bindDeleteHandler(),this._bindLikeHandler(),this._bindOpenHandler(),this.setLikes(this._likes),this._data.owner._id===this._user._id&&this._elementButtonDel.classList.remove("element__remove_inactive"),this._likes.some((function(t){return t._id===e._user._id}))&&this._elementButtonLike.classList.toggle("element__like_active"),this.card}},{key:"_bindDeleteHandler",value:function(){var e=this;this._elementButtonDel.addEventListener("click",(function(){e._handleClickDelete(e)}))}},{key:"_bindLikeHandler",value:function(){var e=this;this._elementButtonLike.addEventListener("click",(function(){e._handleClickLike()}))}},{key:"_bindOpenHandler",value:function(){this._elementImage.addEventListener("click",this._handleCardClick)}},{key:"getId",value:function(){return this._data._id}},{key:"removeCard",value:function(){this.card.remove(),this.card=null}},{key:"getLike",value:function(){return!!this._elementButtonLike.classList.contains("element__like_active")}},{key:"setLikes",value:function(e){this._elementLikes.textContent=e.length}},{key:"updateLikes",value:function(){this._elementButtonLike.classList.toggle("element__like_active")}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"_showInputError",(function(e,t){var n=r._form.querySelector("".concat(r._classes.popupErrorType).concat(e.id));e.classList.add(r._classes.inputErrorClass),n.textContent=t,n.classList.add(r._classes.errorClass)})),w(this,"_hideInputError",(function(e){var t=r._form.querySelector("".concat(r._classes.popupErrorType).concat(e.id));e.classList.remove(r._classes.inputErrorClass),t.classList.remove(r._classes.errorClass),t.textContent=""})),w(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),w(this,"_setEventListeners",(function(){return r.toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r.toggleButtonState(r._inputList,r._buttonElement)}))})),r._buttonElement})),w(this,"enableValidation",(function(){r._setEventListeners()})),this._classes=t,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._classes.inputSelector)),this._buttonElement=this._form.querySelector(this._classes.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._classes.inactiveButtonClass)):(this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.add(this._classes.inactiveButtonClass))}},{key:"deleteErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,n=[{key:"renderItems",value:function(e){var t=this,n=e.items,r=e.user;n.reverse().forEach((function(e){t._renderer({element:e,user:r})}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}],n&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._buttonClosePopup=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_is-opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_is-opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._buttonClosePopup.addEventListener("click",(function(t){e.close(e._popup)})),this._popup.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close(e._popup)}))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=I(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function T(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._name=t._popup.querySelector(".popup__image-name"),t._image=t._popup.querySelector(".popup__image"),t}return t=u,(n=[{key:"open",value:function(e,t){this._name.textContent=e,this._image.setAttribute("src",t),this._image.setAttribute("alt",e),q(x(u.prototype),"open",this).call(this)}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(j);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=H(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},U.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function J(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(r);if(o){var n=z(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return J(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._callback=t,n._form=n._popup.querySelector(".popup__form"),n.inputs=n._form.querySelectorAll(".popup__input"),n.buttonSave=n._popup.querySelector(".popup__save"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._values={},this.inputs.forEach((function(t){e._values[t.name]=t.value})),this._values}},{key:"setEventListeners",value:function(){var e=this;U(z(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._callback(e._getInputValues())}))}},{key:"close",value:function(){U(z(u.prototype),"close",this).call(this),this._form.reset()}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(j);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(){return K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},K.apply(this,arguments)}function Q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Y(e)););return e}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function X(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(r);if(o){var n=Y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return X(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._callback=t,n._confirmButtom=n._popup.querySelector(".popup__confirm"),n}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;K(Y(u.prototype),"setEventListeners",this).call(this),this._confirmButtom.addEventListener("click",(function(t){e._callback(e._element)}))}},{key:"setElement",value:function(e){this._element=e}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(j);function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(t){var n=t.userName,r=t.userAbout,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userAbout=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this.info={name:this._userName.textContent,about:this._userAbout.textContent},this.info}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userAbout.textContent=e.about,this._avatar.setAttribute("src",e.avatar)}}])&&$(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers,this._id=t.id,this._link="".concat(this._url,"/v1/").concat(this._id)}var t,n;return t=e,(n=[{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._link,"/cards"),{headers:this._headers}).then((function(t){return e._onResponce(t)}))}},{key:"getUser",value:function(){var e=this;return fetch("".concat(this._link,"/users/me"),{headers:this._headers}).then((function(t){return e._onResponce(t)}))}},{key:"editUser",value:function(e,t){var n=this;return fetch("".concat(this._link,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._onResponce(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._link,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._onResponce(e)}))}},{key:"addCard",value:function(e,t){var n=this;return fetch("".concat(this._link,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._onResponce(e)}))}},{key:"_onResponce",value:function(e){return e.ok?e.json():Promise.reject({massage:"Ошибка на сервере",res:e})}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._link,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._onResponce(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._link,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._onResponce(e)}))}},{key:"editAvatar",value:function(e){var t=this;return fetch("".concat(this._link,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._onResponce(e)}))}}])&&te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({id:"cohort-51",url:"https://mesto.nomoreparties.co",headers:{authorization:"c544db48-3dd6-45bf-8d5d-369e754e242d","Content-Type":"application/json"}}),re=new O(m,f),oe=new O(m,n),ie=new O(m,_),ue=new ee({userName:i,userAbout:u,avatar:y}),ce=new M(t,(function(e){ce.buttonSave.textContent="Сохранение...",ne.editUser(e.name,e.about).then((function(e){ue.setUserInfo(e),ce.close(),oe.toggleButtonState()})).catch((function(e){console.log("Ошибка сервера",e)})).finally((function(){ce.buttonSave.textContent="Сохраненить"}))})),ae=new M(l,(function(e){ae.buttonSave.textContent="Сохранение...",ne.addCard(e.name,e.link).then((function(e){pe.addItem(he(e,b.data)),ae.close(),re.toggleButtonState()})).catch((function(e){console.log("Ошибка сервера",e)})).finally((function(){ae.buttonSave.textContent="Сохраненить"}))})),se=new M(h,(function(e){se.buttonSave.textContent="Сохранение...",ne.editAvatar(e.avatar).then((function(e){ue.setUserInfo(e),se.close(),ie.toggleButtonState()})).catch((function(e){console.log("Ошибка сервера",e)})).finally((function(){se.buttonSave.textContent="Сохраненить"}))})),le=new A(p),fe=new Z(v,(function(e){ne.deleteCard(e.getId()).then((function(){e.removeCard(),fe.close()})).catch((function(e){console.log("Ошибка сервера",e)}))})),pe=new L({renderer:function(e){var t=he(e.element,e.user);pe.addItem(t)}},c);function he(e,t){var n=new g(e,t,a,(function(){le.open(e.name,e.link)}),(function(e){fe.open(),fe.setElement(e)}),(function(){n.getLike()?ne.deleteLike(n.getId()).then((function(e){n.setLikes(e.likes),n.updateLikes()})).catch((function(e){console.log("Ошибка сервера",e)})):ne.addLike(n.getId()).then((function(e){n.setLikes(e.likes),n.updateLikes()})).catch((function(e){console.log("Ошибка сервера",e)}))}));return n.createElement()}s.addEventListener("click",(function(){re.deleteErrors(),re.toggleButtonState(),ae.open()})),e.addEventListener("click",(function(){ue.getUserInfo(),r.value=ue.info.name,o.value=ue.info.about,oe.deleteErrors(),ce.open()})),d.addEventListener("click",(function(){ie.deleteErrors(),se.open()})),re.enableValidation(),oe.enableValidation(),ce.setEventListeners(),ae.setEventListeners(),le.setEventListeners(),fe.setEventListeners(),ie.enableValidation(),se.setEventListeners(),Promise.all([ne.getUser(),ne.getAllCards()]).then((function(e){ue.setUserInfo(e[0]),pe.renderItems({items:e[1],user:e[0]}),b.data=e[0]})).catch((function(e){console.log("Ошибка сервера",e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sSUFBTUEsRUFBeUJDLFNBQVNDLGNBQWMseUJBQ2hEQyxFQUFvQkYsU0FBU0MsY0FBYyxvQkFDM0NFLEVBQW1CRCxFQUFrQkQsY0FBYyxnQkFFbkRHLEVBQW1CRixFQUFrQkQsY0FBYyw0QkFDbkRJLEVBQW9CSCxFQUFrQkQsY0FBYyw2QkFDcERLLEVBQWNOLFNBQVNDLGNBQWMsa0JBQ3JDTSxFQUFlUCxTQUFTQyxjQUFjLG1CQUV0Q08sRUFBaUJSLFNBQVNDLGNBQWMsYUFDeENRLEVBQWtCVCxTQUFTQyxjQUFjLHFCQUFxQlMsUUFBUVQsY0FBYyxZQUVwRlUsRUFBcUJYLFNBQVNDLGNBQWMsd0JBQzVDVyxFQUFnQlosU0FBU0MsY0FBYyxtQkFDdkNZLEVBQWVELEVBQWNYLGNBQWMsZ0JBRTNDYSxFQUFrQmQsU0FBU0MsY0FBYyxxQkFFekNjLEVBQW1CZixTQUFTQyxjQUFjLHNCQUMxQ2UsRUFBaUJELEVBQWlCZCxjQUFjLGdCQUNoRGdCLEVBQXdCakIsU0FBU0MsY0FBYywyQkFDL0NpQixFQUFjbEIsU0FBU0MsY0FBYyxtQkFFckNrQixFQUFvQm5CLFNBQVNDLGNBQWMsdUJBRTdDbUIsRUFBVSxDQUFDLEVBRVRDLEVBQW1CLENBQzlCQyxhQUFjLGVBQ2RDLGNBQWUsZ0JBQ2ZDLHFCQUFzQixlQUN0QkMsb0JBQXFCLHFCQUNyQkMsZ0JBQWlCLHFCQUNqQkMsV0FBWSxzQkFDWkMsZUFBZSx1QixzS0NsQ1YsSUFBTUMsRUFBYixXQUNFLFdBQ0VDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEksNEZBQ0EsU0FDQUMsS0FBS0MsTUFBUVAsRUFDYk0sS0FBS0UsTUFBUVAsRUFDYkssS0FBS0csTUFBUVQsRUFBS1UsS0FDbEJKLEtBQUtLLE1BQVFYLEVBQUtZLEtBQ2xCTixLQUFLTyxPQUFTYixFQUFLYyxNQUNuQlIsS0FBS1MsVUFBWWIsRUFDakJJLEtBQUtVLGlCQUFtQmIsRUFDeEJHLEtBQUtXLG1CQUFxQmIsRUFDMUJFLEtBQUtZLGlCQUFtQmIsQ0FDekIsQyxRQWxCSCxPLEVBQUEsRyxFQUFBLDRCQW9CRSxXQUFnQixXQThCZCxPQTdCQUMsS0FBS2EsS0FBT2IsS0FBS1MsVUFBVUssV0FBVSxHQUNyQ2QsS0FBS2UsY0FBZ0JmLEtBQUthLEtBQUtoRCxjQUFjLG1CQUM3Q21DLEtBQUtnQixhQUFlaEIsS0FBS2EsS0FBS2hELGNBQWMsa0JBQzVDbUMsS0FBS2lCLGNBQWdCakIsS0FBS2EsS0FBS2hELGNBQWMsbUJBRTdDbUMsS0FBS2dCLGFBQWFFLFlBQWNsQixLQUFLRyxNQUNyQ0gsS0FBS2UsY0FBY0ksYUFBYSxNQUFPbkIsS0FBS0ssT0FDNUNMLEtBQUtlLGNBQWNJLGFBQWEsTUFBT25CLEtBQUtHLE9BRTVDSCxLQUFLb0Isa0JBQW9CcEIsS0FBS2EsS0FBS2hELGNBQWMsb0JBQ2pEbUMsS0FBS3FCLG1CQUFxQnJCLEtBQUthLEtBQUtoRCxjQUFjLGtCQUVsRG1DLEtBQUtzQixxQkFDTHRCLEtBQUt1QixtQkFDTHZCLEtBQUt3QixtQkFDTHhCLEtBQUt5QixTQUFTekIsS0FBS08sUUFFZlAsS0FBS0MsTUFBTXlCLE1BQU1DLE1BQVEzQixLQUFLRSxNQUFNeUIsS0FDdEMzQixLQUFLb0Isa0JBQWtCUSxVQUFVQyxPQUFPLDRCQUl4QzdCLEtBQUtPLE9BQU91QixNQUFLLFNBQUNKLEdBQ2hCLE9BQU9BLEVBQU1DLE1BQVEsRUFBS3pCLE1BQU15QixHQUNqQyxLQUVEM0IsS0FBS3FCLG1CQUFtQk8sVUFBVUcsT0FBTyx3QkFHcEMvQixLQUFLYSxJQUNiLEdBbkRILGdDQXFERSxXQUFxQixXQUNuQmIsS0FBS29CLGtCQUFrQlksaUJBQWlCLFNBQVMsV0FDL0MsRUFBS3JCLG1CQUFtQixFQUN6QixHQUNGLEdBekRILDhCQTJERSxXQUFtQixXQUNqQlgsS0FBS3FCLG1CQUFtQlcsaUJBQWlCLFNBQVMsV0FDaEQsRUFBS3BCLGtCQUNOLEdBQ0YsR0EvREgsOEJBaUVFLFdBQ0VaLEtBQUtlLGNBQWNpQixpQkFBaUIsUUFBU2hDLEtBQUtVLGlCQUNuRCxHQW5FSCxtQkFxRUUsV0FDRSxPQUFPVixLQUFLQyxNQUFNMEIsR0FDbkIsR0F2RUgsd0JBeUVFLFdBQ0UzQixLQUFLYSxLQUFLZ0IsU0FDVjdCLEtBQUthLEtBQU8sSUFDYixHQTVFSCxxQkE4RUUsV0FDRSxRQUFJYixLQUFLcUIsbUJBQW1CTyxVQUFVSyxTQUFTLHVCQUtoRCxHQXBGSCxzQkFzRkUsU0FBU3pCLEdBQ1BSLEtBQUtpQixjQUFjQyxZQUFjVixFQUFNMEIsTUFDeEMsR0F4RkgseUJBMEZFLFdBQ0VsQyxLQUFLcUIsbUJBQW1CTyxVQUFVRyxPQUFPLHVCQUMxQyxNLG9FQTVGSCxLLDhSQ0FPLElBQU1JLEVBQWIsV0FDRSxXQUFZQyxFQUFTQyxHQUFNLFksNEZBQUEsbUNBV1QsU0FBQ0MsRUFBY0MsR0FDL0IsSUFBTUMsRUFBZSxFQUFLQyxNQUFNNUUsY0FBWCxVQUNoQixFQUFLNkUsU0FBU2xELGdCQURFLE9BQ2U4QyxFQUFhSyxLQUVqREwsRUFBYVYsVUFBVWdCLElBQUksRUFBS0YsU0FBU3BELGlCQUN6Q2tELEVBQWF0QixZQUFjcUIsRUFDM0JDLEVBQWFaLFVBQVVnQixJQUFJLEVBQUtGLFNBQVNuRCxXQUMxQyxJQWxCMEIsMEJBb0JULFNBQUMrQyxHQUNqQixJQUFNRSxFQUFlLEVBQUtDLE1BQU01RSxjQUFYLFVBQ2hCLEVBQUs2RSxTQUFTbEQsZ0JBREUsT0FDZThDLEVBQWFLLEtBRWpETCxFQUFhVixVQUFVQyxPQUFPLEVBQUthLFNBQVNwRCxpQkFDNUNrRCxFQUFhWixVQUFVQyxPQUFPLEVBQUthLFNBQVNuRCxZQUM1Q2lELEVBQWF0QixZQUFjLEVBQzVCLElBM0IwQiw4QkE2QkwsU0FBQ29CLEdBQ2hCQSxFQUFhTyxTQUFTQyxNQUd6QixFQUFLQyxnQkFBZ0JULEdBRnJCLEVBQUtVLGdCQUFnQlYsRUFBY0EsRUFBYVcsa0JBSW5ELElBbkMwQiw2QkFxQ04sV0FRbkIsT0FQQSxFQUFLQyxvQkFDTCxFQUFLQyxXQUFXQyxTQUFRLFNBQUNkLEdBQ3ZCQSxFQUFhTixpQkFBaUIsU0FBUyxXQUNyQyxFQUFLcUIsb0JBQW9CZixHQUN6QixFQUFLWSxrQkFBa0IsRUFBS0MsV0FBWSxFQUFLRyxlQUM5QyxHQUNGLElBQ00sRUFBS0EsY0FDYixJQTlDMEIsMkJBZ0RSLFdBQ2pCLEVBQUtDLG9CQUNOLElBakRDdkQsS0FBSzBDLFNBQVdOLEVBQ2hCcEMsS0FBS3lDLE1BQVFKLEVBQ2JyQyxLQUFLbUQsV0FBYUssTUFBTUMsS0FDdEJ6RCxLQUFLeUMsTUFBTWlCLGlCQUFpQjFELEtBQUswQyxTQUFTdkQsZ0JBRTVDYSxLQUFLc0QsZUFBaUJ0RCxLQUFLeUMsTUFBTTVFLGNBQy9CbUMsS0FBSzBDLFNBQVN0RCxxQkFFakIsQyxRQVZILE8sRUFBQSxHLEVBQUEsK0JBcURFLFdBQ0UsT0FBT1ksS0FBS21ELFdBQVdyQixNQUFLLFNBQUNRLEdBQzNCLE9BQVFBLEVBQWFPLFNBQVNDLEtBQy9CLEdBQ0YsR0F6REgsK0JBMkRFLFdBQ005QyxLQUFLMkQsb0JBQ1AzRCxLQUFLc0QsZUFBZW5DLGFBQWEsV0FBWSxZQUM3Q25CLEtBQUtzRCxlQUFlMUIsVUFBVUMsT0FBTzdCLEtBQUswQyxTQUFTckQsdUJBRW5EVyxLQUFLc0QsZUFBZU0sZ0JBQWdCLFlBQ3BDNUQsS0FBS3NELGVBQWUxQixVQUFVZ0IsSUFBSTVDLEtBQUswQyxTQUFTckQscUJBRW5ELEdBbkVILDBCQXFFRSxXQUFlLFdBQ2JXLEtBQUttRCxXQUFXQyxTQUFRLFNBQUNkLEdBQ3ZCLEVBQUtTLGdCQUFnQlQsRUFDdEIsR0FDRixNLG9FQXpFSCxLLHNLQ0FPLElBQU11QixFQUFiLFdBQ0UsYUFBd0JDLEdBQWtCLElBQTdCQyxFQUE2QixFQUE3QkEsVSw0RkFBNkIsU0FDeEMvRCxLQUFLZ0UsVUFBWUQsRUFDakIvRCxLQUFLaUUsV0FBYUgsQ0FDbkIsQyxRQUpILE8sRUFBQSxFLEVBQUEsMEJBTUUsWUFBMkIsV0FBZEksRUFBYyxFQUFkQSxNQUFPdkUsRUFBTyxFQUFQQSxLQUNMdUUsRUFBTUMsVUFDZGYsU0FBUSxTQUFBZ0IsR0FDWCxFQUFLSixVQUFVLENBQUNLLFFBQVNELEVBQU16RSxLQUFNQSxHQUN0QyxHQUNGLEdBWEgscUJBYUUsU0FBUTBFLEdBQ05yRSxLQUFLaUUsV0FBV0ssUUFBUUQsRUFDekIsSSx1RUFmSCxLLHNLQ0FPLElBQU1FLEVBQWIsV0FDRSxXQUFZQyxJLDRGQUFPLFNBQ2pCeEUsS0FBS3lFLE9BQVNELEVBQ2R4RSxLQUFLMEUsa0JBQW9CMUUsS0FBS3lFLE9BQU81RyxjQUFjLGlCQUNuRG1DLEtBQUsyRSxnQkFBa0IzRSxLQUFLMkUsZ0JBQWdCQyxLQUFLNUUsS0FDbEQsQyxRQUxILE8sRUFBQSxHLEVBQUEsbUJBT0UsV0FDRUEsS0FBS3lFLE9BQU83QyxVQUFVZ0IsSUFBSSxtQkFDMUJoRixTQUFTb0UsaUJBQWlCLFVBQVdoQyxLQUFLMkUsZ0JBQzNDLEdBVkgsbUJBWUUsV0FDRTNFLEtBQUt5RSxPQUFPN0MsVUFBVUMsT0FBTyxtQkFDN0JqRSxTQUFTaUgsb0JBQW9CLFVBQVc3RSxLQUFLMkUsZ0JBQzlDLEdBZkgsNkJBaUJFLFNBQWdCRyxHQUNFLFdBQVpBLEVBQUlDLEtBQ04vRSxLQUFLZ0YsT0FFUixHQXJCSCwrQkF1QkUsV0FBb0IsV0FDbEJoRixLQUFLMEUsa0JBQWtCMUMsaUJBQWlCLFNBQVMsU0FBQ2lELEdBQ2hELEVBQUtELE1BQU0sRUFBS1AsT0FDakIsSUFFRHpFLEtBQUt5RSxPQUFPekMsaUJBQWlCLFNBQVMsU0FBQ2lELEdBQ2pDQSxFQUFNQyxTQUFXRCxFQUFNRSxlQUN6QixFQUFLSCxNQUFNLEVBQUtQLE9BRW5CLEdBQ0YsTSxvRUFqQ0gsSyxxd0NDRU8sSUFBTVcsRUFBYixhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFDRSxXQUFZWixHQUFPLGEsNEZBQUEsVUFDakIsY0FBTUEsSUFDRHJFLE1BQVEsRUFBS3NFLE9BQU81RyxjQUFjLHNCQUN2QyxFQUFLd0gsT0FBUyxFQUFLWixPQUFPNUcsY0FBYyxpQkFIdkIsQ0FJbEIsQ0FMSCxPLEVBQUEsRyxFQUFBLG1CQU9FLFNBQUt5SCxFQUFVQyxHQUNidkYsS0FBS0csTUFBTWUsWUFBY29FLEVBQ3pCdEYsS0FBS3FGLE9BQU9sRSxhQUFhLE1BQU9vRSxHQUNoQ3ZGLEtBQUtxRixPQUFPbEUsYUFBYSxNQUFPbUUsR0FDaEMsd0NBQ0QsTSxvRUFaSCxHQUFvQ2YsRyxxd0NDRTdCLElBQU1pQixFQUFiLGEscVJBQUEsVSxRQUFBLEcsRUFBQSxFLCtZQUNFLFdBQVloQixFQUFPaUIsR0FBVSxhLDRGQUFBLFVBQzNCLGNBQU1qQixJQUNEa0IsVUFBWUQsRUFDakIsRUFBS2hELE1BQVEsRUFBS2dDLE9BQU81RyxjQUFjLGdCQUN2QyxFQUFLOEgsT0FBUyxFQUFLbEQsTUFBTWlCLGlCQUFpQixpQkFDMUMsRUFBS2tDLFdBQWEsRUFBS25CLE9BQU81RyxjQUFjLGdCQUxqQixDQU01QixDQVBILE8sRUFBQSxHLEVBQUEsOEJBU0UsV0FBa0IsV0FLaEIsT0FKQW1DLEtBQUs2RixRQUFVLENBQUMsRUFDaEI3RixLQUFLMkYsT0FBT3ZDLFNBQVEsU0FBQzBDLEdBQ25CLEVBQUtELFFBQVFDLEVBQU0xRixNQUFRMEYsRUFBTUMsS0FDbEMsSUFDTS9GLEtBQUs2RixPQUNiLEdBZkgsK0JBaUJFLFdBQW9CLFdBQ2xCLHNEQUNBN0YsS0FBS3lDLE1BQU1ULGlCQUFpQixVQUFVLFNBQUM4QyxHQUNyQ0EsRUFBSWtCLGlCQUNKLEVBQUtOLFVBQVUsRUFBS08sa0JBQ3JCLEdBQ0YsR0F2QkgsbUJBeUJFLFdBQ0UsMENBQ0FqRyxLQUFLeUMsTUFBTXlELE9BQ1osTSxvRUE1QkgsR0FBbUMzQixHLHF3Q0NGNUIsSUFBTTRCLEVBQWIsYSxxUkFBQSxVLFFBQUEsRyxFQUFBLEUsK1lBQ0UsV0FBWTNCLEVBQU9pQixHQUFVLGEsNEZBQUEsVUFDM0IsY0FBTWpCLElBQ0RrQixVQUFZRCxFQUNqQixFQUFLVyxlQUFpQixFQUFLM0IsT0FBTzVHLGNBQWMsbUJBSHJCLENBSTVCLENBTEgsTyxFQUFBLEcsRUFBQSxnQ0FPRSxXQUFvQixXQUNsQixzREFDQW1DLEtBQUtvRyxlQUFlcEUsaUJBQWlCLFNBQVMsU0FBQ2lELEdBQzdDLEVBQUtTLFVBQVUsRUFBS1csU0FDckIsR0FDRixHQVpILHdCQWNFLFNBQVdoQyxHQUNUckUsS0FBS3FHLFNBQVdoQyxDQUNqQixNLG9FQWhCSCxHQUFrQ0UsRyxzS0NGM0IsSUFBTStCLEdBQWIsV0FDRSxjQUE2QyxJQUEvQkMsRUFBK0IsRUFBL0JBLFNBQVVDLEVBQXFCLEVBQXJCQSxVQUFXQyxFQUFVLEVBQVZBLFEsNEZBQVUsU0FDM0N6RyxLQUFLMEcsVUFBWUgsRUFDakJ2RyxLQUFLMkcsV0FBYUgsRUFDbEJ4RyxLQUFLNEcsUUFBVUgsQ0FDaEIsQyxRQUxILE8sRUFBQSxHLEVBQUEsMEJBT0UsV0FLRSxPQUpBekcsS0FBSzZHLEtBQU8sQ0FDVnpHLEtBQU1KLEtBQUswRyxVQUFVeEYsWUFDckI0RixNQUFPOUcsS0FBSzJHLFdBQVd6RixhQUVsQmxCLEtBQUs2RyxJQUNiLEdBYkgseUJBZUUsU0FBWW5ILEdBQ1ZNLEtBQUswRyxVQUFVeEYsWUFBY3hCLEVBQUtVLEtBQ2xDSixLQUFLMkcsV0FBV3pGLFlBQWN4QixFQUFLb0gsTUFDbkM5RyxLQUFLNEcsUUFBUXpGLGFBQWEsTUFBT3pCLEVBQUsrRyxPQUN2QyxNLG9FQW5CSCxLLHVLQ0FPLElDV0RNLEdBQU0sSURYWixXQUNFLFdBQVlDLEksNEZBQU8sU0FDakJoSCxLQUFLaUgsS0FBT0QsRUFBT0UsSUFDbkJsSCxLQUFLbUgsU0FBV0gsRUFBT0ksUUFDdkJwSCxLQUFLMkIsSUFBTXFGLEVBQU9yRSxHQUNsQjNDLEtBQUtLLE1BQUwsVUFBZ0JMLEtBQUtpSCxLQUFyQixlQUFnQ2pILEtBQUsyQixJQUN0QyxDLFFBTkgsTyxFQUFBLEcsRUFBQSwwQkFRRSxXQUFhLFdBQ1gsT0FBTzBGLE1BQU0sR0FBRCxPQUFJckgsS0FBS0ssTUFBVCxVQUF3QixDQUNsQytHLFFBQVNwSCxLQUFLbUgsV0FFZkcsTUFBSyxTQUFDQyxHQUNILE9BQU8sRUFBS0MsWUFBWUQsRUFDM0IsR0FDRixHQWZILHFCQWlCRSxXQUFTLFdBQ1AsT0FBT0YsTUFBTSxHQUFELE9BQUlySCxLQUFLSyxNQUFULGFBQTJCLENBQ3JDK0csUUFBU3BILEtBQUttSCxXQUVmRyxNQUFLLFNBQUNDLEdBQ0wsT0FBTyxFQUFLQyxZQUFZRCxFQUN6QixHQUNGLEdBeEJILHNCQTBCRSxTQUFTbkgsRUFBTTBHLEdBQU8sV0FDcEIsT0FBT08sTUFBTSxHQUFELE9BQUlySCxLQUFLSyxNQUFULGFBQTJCLENBQ3JDb0gsT0FBUSxRQUNSTCxRQUFTcEgsS0FBS21ILFNBQ2RPLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJ4SCxLQUFNQSxFQUNOMEcsTUFBT0EsTUFHVlEsTUFBSyxTQUFDQyxHQUNMLE9BQU8sRUFBS0MsWUFBWUQsRUFDekIsR0FDRixHQXRDSCx3QkF3Q0UsU0FBV00sR0FBTyxXQUNoQixPQUFPUixNQUFNLEdBQUQsT0FBSXJILEtBQUtLLE1BQVQsa0JBQXdCd0gsR0FBVSxDQUM1Q0osT0FBUSxTQUNSTCxRQUFTcEgsS0FBS21ILFdBRWZHLE1BQUssU0FBQ0MsR0FDTCxPQUFPLEVBQUtDLFlBQVlELEVBQ3pCLEdBQ0YsR0FoREgscUJBa0RFLFNBQVFuSCxFQUFNRSxHQUFLLFdBQ2pCLE9BQU8rRyxNQUFNLEdBQUQsT0FBSXJILEtBQUtLLE1BQVQsVUFBd0IsQ0FDbENvSCxPQUFRLE9BQ1JMLFFBQVNwSCxLQUFLbUgsU0FDZE8sS0FBTUMsS0FBS0MsVUFBVSxDQUNuQnhILEtBQU1BLEVBQ05FLEtBQU1BLE1BR1RnSCxNQUFLLFNBQUNDLEdBQ0wsT0FBTyxFQUFLQyxZQUFZRCxFQUN6QixHQUNGLEdBOURILHlCQWdFRSxTQUFZQSxHQUNWLE9BQUdBLEVBQUlPLEdBQ0VQLEVBQUlRLE9BRU5DLFFBQVFDLE9BQU8sQ0FBQ0MsUUFBUyxvQkFBcUJYLElBQUFBLEdBQ3RELEdBckVILHFCQXVFQSxTQUFRTSxHQUFPLFdBQ2IsT0FBT1IsTUFBTSxHQUFELE9BQUlySCxLQUFLSyxNQUFULGtCQUF3QndILEVBQXhCLFVBQXdDLENBQ2xESixPQUFRLE1BQ1JMLFFBQVNwSCxLQUFLbUgsV0FFZkcsTUFBSyxTQUFDQyxHQUNMLE9BQU8sRUFBS0MsWUFBWUQsRUFDekIsR0FDRixHQS9FRCx3QkFpRkEsU0FBV00sR0FBTyxXQUNoQixPQUFPUixNQUFNLEdBQUQsT0FBSXJILEtBQUtLLE1BQVQsa0JBQXdCd0gsRUFBeEIsVUFBd0MsQ0FDbERKLE9BQVEsU0FDUkwsUUFBU3BILEtBQUttSCxXQUVmRyxNQUFLLFNBQUNDLEdBQ0wsT0FBTyxFQUFLQyxZQUFZRCxFQUN6QixHQUNGLEdBekZELHdCQTJGQSxTQUFXZCxHQUFRLFdBQ2pCLE9BQU9ZLE1BQU0sR0FBRCxPQUFJckgsS0FBS0ssTUFBVCxvQkFBa0MsQ0FDNUNvSCxPQUFRLFFBQ1JMLFFBQVNwSCxLQUFLbUgsU0FDZE8sS0FBTUMsS0FBS0MsVUFBVSxDQUNuQm5CLE9BQVFBLE1BR1hhLE1BQUssU0FBQ0MsR0FDTCxPQUFPLEVBQUtDLFlBQVlELEVBQ3pCLEdBQ0YsTSxxRUF0R0QsS0NXWSxDVjBCUSxDQUNsQjVFLEdBQUksWUFDSnVFLElBQUssaUNBQ0xFLFFBQVMsQ0FDUGUsY0FBZSx1Q0FDZixlQUFnQixzQlU5QmRDLEdBQWUsSUFBSWpHLEVBQWNrRyxFQUF3QkEsR0FDekRDLEdBQW1CLElBQUluRyxFQUFja0csRUFBd0JBLEdBQzdERSxHQUFrQixJQUFJcEcsRUFBY2tHLEVBQXdCQSxHQUVyRDFJLEdBQU8sSUFBSTJHLEdBQVMsQ0FBQ0MsU0FBVThCLEVBQW1CN0IsVUFBVzZCLEVBQW9CNUIsT0FBUTRCLElBRWhHRyxHQUE2QixJQUFJaEQsRUFBZTZDLEdBQXlCLFNBQUNJLEdBQzlFRCxHQUEwQjVDLFdBQVcxRSxZQUFjLGdCQUNuRDZGLEdBQUkyQixTQUFTRCxFQUFPckksS0FBTXFJLEVBQU8zQixPQUM5QlEsTUFBSyxTQUFDNUgsR0FDTEMsR0FBS2dKLFlBQVlqSixHQUNqQjhJLEdBQTBCeEQsUUFDMUJzRCxHQUFpQnBGLG1CQUNsQixJQUNBMEYsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJLGlCQUFrQkYsRUFDL0IsSUFDQUcsU0FBUSxXQUNQUixHQUEwQjVDLFdBQVcxRSxZQUFjLGFBQ3BELEdBRUosSUFFSytILEdBQXlCLElBQUl6RCxFQUFlNkMsR0FBcUIsU0FBQ0ksR0FDdEVRLEdBQXNCckQsV0FBVzFFLFlBQWMsZ0JBQy9DNkYsR0FBSW1DLFFBQVFULEVBQU9ySSxLQUFNcUksRUFBT25JLE1BQzdCZ0gsTUFBSyxTQUFDNUgsR0FDTHlKLEdBQWFDLFFBQVFDLEdBQVkzSixFQUFNMkksRUFBQUEsT0FDdkNZLEdBQXNCakUsUUFDdEJvRCxHQUFhbEYsbUJBQ2QsSUFDQTBGLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSSxpQkFBa0JGLEVBQy9CLElBQ0FHLFNBQVEsV0FDUEMsR0FBc0JyRCxXQUFXMUUsWUFBYyxhQUNoRCxHQUVKLElBRUtvSSxHQUF1QixJQUFJOUQsRUFBZTZDLEdBQXdCLFNBQUNJLEdBQ3ZFYSxHQUFxQjFELFdBQVcxRSxZQUFjLGdCQUM5QzZGLEdBQUl3QyxXQUFXZCxFQUFPaEMsUUFDbkJhLE1BQUssU0FBQzVILEdBQ0xDLEdBQUtnSixZQUFZakosR0FDakI0SixHQUFxQnRFLFFBQ3JCdUQsR0FBZ0JyRixtQkFDakIsSUFDQTBGLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSSxpQkFBa0JGLEVBQy9CLElBQ0FHLFNBQVEsV0FDUE0sR0FBcUIxRCxXQUFXMUUsWUFBYyxhQUMvQyxHQUVGLElBRUdzSSxHQUFRLElBQUlwRSxFQUFlaUQsR0FFM0JvQixHQUFlLElBQUl0RCxFQUFja0MsR0FBd0IsU0FBQ2hFLEdBQzlEMEMsR0FBSTJDLFdBQVdyRixFQUFRc0YsU0FDcEJyQyxNQUFLLFdBQ0pqRCxFQUFRdUYsYUFDUkgsR0FBYXpFLE9BQ2QsSUFDQTRELE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSSxpQkFBa0JGLEVBQy9CLEdBQ0osSUFFS00sR0FBZSxJQUFJdEYsRUFBUSxDQUMvQkUsU0FBVSxZQUFtQixJQUNyQmxELEVBQU93SSxHQURjLEVBQWpCaEYsUUFBaUIsRUFBUjFFLE1BRW5Cd0osR0FBYUMsUUFBUXZJLEVBQ3BCLEdBRUh3SCxHQWFGLFNBQVNnQixHQUFXM0osRUFBTUMsR0FDeEIsSUFBTWtCLEVBQU8sSUFBSXBCLEVBQU1DLEVBQU1DLEVBQU0wSSxHQUVqQyxXQUNFbUIsR0FBTUssS0FBS25LLEVBQUtVLEtBQU1WLEVBQUtZLEtBQzVCLElBRUQsU0FBQytELEdBQ0NvRixHQUFhSSxPQUNiSixHQUFhSyxXQUFXekYsRUFDekIsSUFFRCxXQUNLeEQsRUFBS2tKLFVBQ05oRCxHQUFJaUQsV0FBV25KLEVBQUs4SSxTQUNqQnJDLE1BQUssU0FBQzVILEdBQ0xtQixFQUFLWSxTQUFTL0IsRUFBS2MsT0FDbkJLLEVBQUtvSixhQUNOLElBQ0FyQixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUksaUJBQWtCRixFQUMvQixJQUdIOUIsR0FBSW1ELFFBQVFySixFQUFLOEksU0FDZHJDLE1BQUssU0FBQzVILEdBQ0xtQixFQUFLWSxTQUFTL0IsRUFBS2MsT0FDbkJLLEVBQUtvSixhQUNOLElBQ0FyQixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUksaUJBQWtCRixFQUMvQixHQUVOLElBTUgsT0FGZ0JoSSxFQUFLc0osZUFHdEIsQ0FlRDlCLEVBQUFBLGlCQUEwQyxTQWIxQyxXQUNFRCxHQUFhZ0MsZUFDYmhDLEdBQWFsRixvQkFDYitGLEdBQXNCWSxNQUN2QixJQVVEeEIsRUFBQUEsaUJBQThDLFNBaEU5QyxXQUNFMUksR0FBSzBLLGNBQ0xoQyxFQUFBQSxNQUErQjFJLEdBQUtrSCxLQUFLekcsS0FDekNpSSxFQUFBQSxNQUFnQzFJLEdBQUtrSCxLQUFLQyxNQUMxQ3dCLEdBQWlCOEIsZUFDakI1QixHQUEwQnFCLE1BQzNCLElBMkREeEIsRUFBQUEsaUJBQTZDLFNBVDdDLFdBQ0VFLEdBQWdCNkIsZUFDaEJkLEdBQXFCTyxNQUN0QixJQVFEekIsR0FBYWtDLG1CQUNiaEMsR0FBaUJnQyxtQkFDakI5QixHQUEwQitCLG9CQUMxQnRCLEdBQXNCc0Isb0JBQ3RCZixHQUFNZSxvQkFDTmQsR0FBYWMsb0JBQ2JoQyxHQUFnQitCLG1CQUNoQmhCLEdBQXFCaUIsb0JBSXJCdkMsUUFBUXdDLElBQUksQ0FBQ3pELEdBQUkwRCxVQUFXMUQsR0FBSTJELGdCQUM3QnBELE1BQUssU0FBQ3FELEdBQ0xoTCxHQUFLZ0osWUFBWWdDLEVBQVEsSUFDekJ4QixHQUFheUIsWUFBWSxDQUFDMUcsTUFBT3lHLEVBQVEsR0FBSWhMLEtBQU1nTCxFQUFRLEtBQzNEdEMsRUFBQUEsS0FBc0JzQyxFQUFRLEVBQy9CLElBQ0EvQixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUksaUJBQWtCRixFQUMvQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYmxvY2tQb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1Qb3B1cFByb2ZpbGUgPSBibG9ja1BvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5hbWVQb3B1cFByb2ZpbGUgPSBibG9ja1BvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF92YWx1ZV9uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgYWJvdXRQb3B1cFByb2ZpbGUgPSBibG9ja1BvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF92YWx1ZV9hYm91dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hYm91dFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50VGVtcGxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VsZW1lbnQtdGVtcGxhdGVcIikuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcclxuXHJcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuUG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBibG9ja1BvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZFwiKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1Qb3B1cEFkZCA9IGJsb2NrUG9wdXBBZGQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBibG9ja1BvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcblxyXG5leHBvcnQgY29uc3QgYmxvY2tQb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBmb3JtUG9wdXBBdmF0YXI9IGJsb2NrUG9wdXBBdmF0YXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5Qb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBibG9ja1BvcHVwQ29uZmlybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9jb25maXJtXCIpO1xyXG5cclxuZXhwb3J0IGxldCB1c2VyRGF0YSA9e31cclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVfYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfYWN0aXZlJyxcclxuICBwb3B1cEVycm9yVHlwZTonLnBvcHVwX19lcnJvcl90eXBlXydcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmYgPSB7XHJcbiAgaWQ6IFwiY29ob3J0LTUxXCIsXHJcbiAgdXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jb1wiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdjNTQ0ZGI0OC0zZGQ2LTQ1YmYtOGQ1ZC0zNjllNzU0ZTI0MmQnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufSIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICB1c2VyLFxuICAgIHRlbXBsYXRlLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVDbGlja0RlbGV0ZSxcbiAgICBoYW5kbGVDbGlja0xpa2VcbiAgKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fdXNlciA9IHVzZXI7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDbGlja0RlbGV0ZSA9IGhhbmRsZUNsaWNrRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUNsaWNrTGlrZSA9IGhhbmRsZUNsaWNrTGlrZTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5jYXJkID0gdGhpcy5fdGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2VsZW1lbnRJbWFnZSA9IHRoaXMuY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2VsZW1lbnROYW1lID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbmFtZVwiKTtcbiAgICB0aGlzLl9lbGVtZW50TGlrZXMgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlc1wiKTtcblxuICAgIHRoaXMuX2VsZW1lbnROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX2xpbmspO1xuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XG5cbiAgICB0aGlzLl9lbGVtZW50QnV0dG9uRGVsID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fcmVtb3ZlXCIpO1xuICAgIHRoaXMuX2VsZW1lbnRCdXR0b25MaWtlID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZVwiKTtcblxuICAgIHRoaXMuX2JpbmREZWxldGVIYW5kbGVyKCk7XG4gICAgdGhpcy5fYmluZExpa2VIYW5kbGVyKCk7XG4gICAgdGhpcy5fYmluZE9wZW5IYW5kbGVyKCk7XG4gICAgdGhpcy5zZXRMaWtlcyh0aGlzLl9saWtlcyk7XG5cbiAgICBpZiAodGhpcy5fZGF0YS5vd25lci5faWQgPT09IHRoaXMuX3VzZXIuX2lkKSB7XG4gICAgICB0aGlzLl9lbGVtZW50QnV0dG9uRGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19yZW1vdmVfaW5hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5fbGlrZXMuc29tZSgob3duZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIG93bmVyLl9pZCA9PT0gdGhpcy5fdXNlci5faWQ7XG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5fZWxlbWVudEJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhcmQ7XG4gIH1cblxuICBfYmluZERlbGV0ZUhhbmRsZXIoKSB7XG4gICAgdGhpcy5fZWxlbWVudEJ1dHRvbkRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2xpY2tEZWxldGUodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfYmluZExpa2VIYW5kbGVyKCkge1xuICAgIHRoaXMuX2VsZW1lbnRCdXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0xpa2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9iaW5kT3BlbkhhbmRsZXIoKSB7XG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xuICB9XG5cbiAgZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEuX2lkO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZCgpIHtcbiAgICB0aGlzLmNhcmQucmVtb3ZlKCk7XG4gICAgdGhpcy5jYXJkID0gbnVsbDtcbiAgfVxuXG4gIGdldExpa2UoKSB7XG4gICAgaWYgKHRoaXMuX2VsZW1lbnRCdXR0b25MaWtlLmNsYXNzTGlzdC5jb250YWlucyhcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHNldExpa2VzKGxpa2VzKSB7XG4gICAgdGhpcy5fZWxlbWVudExpa2VzLnRleHRDb250ZW50ID0gbGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgdXBkYXRlTGlrZXMoKSB7XG4gICAgdGhpcy5fZWxlbWVudEJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNsYXNzZXMsIGZvcm0pIHtcbiAgICB0aGlzLl9jbGFzc2VzID0gY2xhc3NlcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NsYXNzZXMuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jbGFzc2VzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAke3RoaXMuX2NsYXNzZXMucG9wdXBFcnJvclR5cGV9JHtpbnB1dEVsZW1lbnQuaWR9YFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY2xhc3Nlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jbGFzc2VzLmVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgJHt0aGlzLl9jbGFzc2VzLnBvcHVwRXJyb3JUeXBlfSR7aW5wdXRFbGVtZW50LmlkfWBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NsYXNzZXMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jbGFzc2VzLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2J1dHRvbkVsZW1lbnQ7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY2xhc3Nlcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jbGFzc2VzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUVycm9ycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKXtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoe2l0ZW1zLCB1c2VyfSkge1xuICAgIGNvbnN0IGRhdGEgPSBpdGVtcy5yZXZlcnNlKClcbiAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcih7ZWxlbWVudDogaXRlbSwgdXNlcjogdXNlcn0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbiAgXG59XG5cblxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xuICAgIHRoaXMuX2J1dHRvbkNsb3NlUG9wdXAgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZVwiKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9pcy1vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2lzLW9wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b25DbG9zZVBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UodGhpcy5fcG9wdXApO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKHRoaXMuX3BvcHVwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgc3VwZXIocG9wdXApO1xuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1uYW1lXCIpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gIH1cblxuICBvcGVuKGNhcmROYW1lLCBjYXJkSW1hZ2UpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gY2FyZE5hbWU7XG4gICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGNhcmRJbWFnZSk7XG4gICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGNhcmROYW1lKTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIHV0aWxzIGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzLmpzXCI7XG5pbXBvcnQgKiBhcyBpbmRleCBmcm9tIFwiLi4vaW5kZXguanNcIjtcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBjYWxsYmFjaykge1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIHRoaXMuaW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICB0aGlzLmJ1dHRvblNhdmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlXCIpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX3ZhbHVlcyA9IHt9O1xuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl92YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9jYWxsYmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBjYWxsYmFjaykge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIHRoaXMuX2NvbmZpcm1CdXR0b20gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb25maXJtXCIpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fY29uZmlybUJ1dHRvbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2NhbGxiYWNrKHRoaXMuX2VsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFbGVtZW50KGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VyQWJvdXQsIGF2YXRhciB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcbiAgICB0aGlzLl91c2VyQWJvdXQgPSB1c2VyQWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5pbmZvID0ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuaW5mbztcbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgIHRoaXMuX2F2YXRhci5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgZGF0YS5hdmF0YXIpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpe1xyXG4gICAgdGhpcy5fdXJsID0gY29uZmlnLnVybFxyXG4gICAgdGhpcy5faGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzXHJcbiAgICB0aGlzLl9pZCA9IGNvbmZpZy5pZFxyXG4gICAgdGhpcy5fbGluayA9IGAke3RoaXMuX3VybH0vdjEvJHt0aGlzLl9pZH1gXHJcbiAgfVxyXG5cclxuICBnZXRBbGxDYXJkcygpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcyk9PntcclxuICAgICAgICByZXR1cm4gdGhpcy5fb25SZXNwb25jZShyZXMpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlcigpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcyk9PntcclxuICAgICAgcmV0dXJuIHRoaXMuX29uUmVzcG9uY2UocmVzKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGVkaXRVc2VyKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcyk9PntcclxuICAgICAgcmV0dXJuIHRoaXMuX29uUmVzcG9uY2UocmVzKVxyXG4gICAgfSk7ICBcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoaWRDYXJkKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9saW5rfS9jYXJkcy8ke2lkQ2FyZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKT0+e1xyXG4gICAgICByZXR1cm4gdGhpcy5fb25SZXNwb25jZShyZXMpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChuYW1lLCBsaW5rKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9saW5rfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbigocmVzKT0+e1xyXG4gICAgICByZXR1cm4gdGhpcy5fb25SZXNwb25jZShyZXMpXHJcbiAgICB9KTsgXHJcbiAgfVxyXG5cclxuICBfb25SZXNwb25jZShyZXMpe1xyXG4gICAgaWYocmVzLm9rKXtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKClcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7bWFzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQvdCwINGB0LXRgNCy0LXRgNC1JywgcmVzfSlcclxuICB9XHJcblxyXG5hZGRMaWtlKGlkQ2FyZCl7XHJcbiAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L2NhcmRzLyR7aWRDYXJkfS9saWtlc2AsIHtcclxuICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gIH0pXHJcbiAgLnRoZW4oKHJlcyk9PntcclxuICAgIHJldHVybiB0aGlzLl9vblJlc3BvbmNlKHJlcylcclxuICB9KTsgXHJcbn1cclxuXHJcbmRlbGV0ZUxpa2UoaWRDYXJkKXtcclxuICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vY2FyZHMvJHtpZENhcmR9L2xpa2VzYCwge1xyXG4gICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgfSlcclxuICAudGhlbigocmVzKT0+e1xyXG4gICAgcmV0dXJuIHRoaXMuX29uUmVzcG9uY2UocmVzKVxyXG4gIH0pOyBcclxufVxyXG5cclxuZWRpdEF2YXRhcihhdmF0YXIpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgYXZhdGFyOiBhdmF0YXJcclxuICAgIH0pXHJcbiAgfSlcclxuICAudGhlbigocmVzKT0+e1xyXG4gICAgcmV0dXJuIHRoaXMuX29uUmVzcG9uY2UocmVzKVxyXG4gIH0pOyAgXHJcbn1cclxuXHJcbn0iLCJpbXBvcnQgJy4vcGFnZXMvaW5kZXguY3NzJ1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSBcIi4vc2NyaXB0cy91dGlscy5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL3NjcmlwdHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHtGb3JtVmFsaWRhdG9yfSBmcm9tIFwiLi9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIlxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuL3NjcmlwdHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBQb3B1cENvbmZpcm0gfSBmcm9tICcuL3NjcmlwdHMvUG9wdXBDb25maXJtLmpzJztcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4vc2NyaXB0cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4vc2NyaXB0cy9BcGkuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFwaSAodXRpbHMuY29uZilcbmNvbnN0IGFkZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHV0aWxzLnZhbGlkYXRpb25Db25maWcsIHV0aWxzLmZvcm1Qb3B1cEFkZClcbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih1dGlscy52YWxpZGF0aW9uQ29uZmlnLCB1dGlscy5mb3JtUG9wdXBQcm9maWxlKVxuY29uc3QgYXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodXRpbHMudmFsaWRhdGlvbkNvbmZpZywgdXRpbHMuZm9ybVBvcHVwQXZhdGFyKVxuXG5leHBvcnQgY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh7dXNlck5hbWU6IHV0aWxzLnByb2ZpbGVOYW1lLCB1c2VyQWJvdXQ6IHV0aWxzLnByb2ZpbGVBYm91dCwgYXZhdGFyOiB1dGlscy5pbWFnZUF2YXRhcn0pXG5cbmNvbnN0IGJsb2NrUG9wdXBQcm9maWxlV2l0aEZvcm0gID0gbmV3IFBvcHVwV2l0aEZvcm0gKHV0aWxzLmJsb2NrUG9wdXBQcm9maWxlLCAodmFsdWVzKT0+e1xuICBibG9ja1BvcHVwUHJvZmlsZVdpdGhGb3JtLmJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCJcbiAgYXBpLmVkaXRVc2VyKHZhbHVlcy5uYW1lLCB2YWx1ZXMuYWJvdXQpXG4gICAgLnRoZW4oKGRhdGEpPT57XG4gICAgICB1c2VyLnNldFVzZXJJbmZvKGRhdGEpXG4gICAgICBibG9ja1BvcHVwUHJvZmlsZVdpdGhGb3JtLmNsb3NlKClcbiAgICAgIHByb2ZpbGVWYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpPT57XG4gICAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwJywgZXJyIClcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpPT57XG4gICAgICBibG9ja1BvcHVwUHJvZmlsZVdpdGhGb3JtLmJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNGC0YxcIlxuICAgIH0pXG5cbn0pXG5cbmNvbnN0IGJsb2NrUG9wdXBBZGRXaXRoRm9ybSAgPSBuZXcgUG9wdXBXaXRoRm9ybSAodXRpbHMuYmxvY2tQb3B1cEFkZCwgKHZhbHVlcyk9PntcbiAgYmxvY2tQb3B1cEFkZFdpdGhGb3JtLmJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCJcbiAgYXBpLmFkZENhcmQodmFsdWVzLm5hbWUsIHZhbHVlcy5saW5rKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkIChkYXRhLCB1dGlscy51c2VyRGF0YS5kYXRhKSlcbiAgICAgIGJsb2NrUG9wdXBBZGRXaXRoRm9ybS5jbG9zZSgpXG4gICAgICBhZGRWYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpPT57XG4gICAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwJywgZXJyIClcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpPT57XG4gICAgICBibG9ja1BvcHVwQWRkV2l0aEZvcm0uYnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40YLRjFwiXG4gICAgfSlcblxufSlcblxuY29uc3QgYmxvY2tQb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSAodXRpbHMuYmxvY2tQb3B1cEF2YXRhciwgKHZhbHVlcyk9PntcbiAgYmxvY2tQb3B1cEVkaXRBdmF0YXIuYnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIlxuICBhcGkuZWRpdEF2YXRhcih2YWx1ZXMuYXZhdGFyKVxuICAgIC50aGVuKChkYXRhKT0+e1xuICAgICAgdXNlci5zZXRVc2VySW5mbyhkYXRhKVxuICAgICAgYmxvY2tQb3B1cEVkaXRBdmF0YXIuY2xvc2UoKVxuICAgICAgYXZhdGFyVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKClcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKT0+e1xuICAgICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDRgdC10YDQstC10YDQsCcsIGVyciApXG4gICAgfSlcbiAgICAuZmluYWxseSgoKT0+e1xuICAgICAgYmxvY2tQb3B1cEVkaXRBdmF0YXIuYnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40YLRjFwiXG4gICAgfSlcbiAgXG4gIH0pXG5cbmNvbnN0IGltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHV0aWxzLmJsb2NrUG9wdXBJbWFnZSlcblxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybSAodXRpbHMuYmxvY2tQb3B1cENvbmZpcm0sKGVsZW1lbnQpPT57XG4gIGFwaS5kZWxldGVDYXJkKGVsZW1lbnQuZ2V0SWQoKSlcbiAgICAudGhlbigoKT0+e1xuICAgICAgZWxlbWVudC5yZW1vdmVDYXJkKClcbiAgICAgIHBvcHVwQ29uZmlybS5jbG9zZSgpXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycik9PntcbiAgICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LAg0YHQtdGA0LLQtdGA0LAnLCBlcnIgKVxuICAgIH0pXG59KVxuXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoe2VsZW1lbnQsIHVzZXJ9KT0+e1xuICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGVsZW1lbnQsIHVzZXIpXG4gICAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oY2FyZClcbiAgICB9XG4gIH0sXG4gIHV0aWxzLmNhcmRzQ29udGFpbmVyXG4pXG5cblxuXG5mdW5jdGlvbiBvcGVuRWRpdFBvcHVwKCkge1xuICB1c2VyLmdldFVzZXJJbmZvKClcbiAgdXRpbHMubmFtZVBvcHVwUHJvZmlsZS52YWx1ZSA9IHVzZXIuaW5mby5uYW1lO1xuICB1dGlscy5hYm91dFBvcHVwUHJvZmlsZS52YWx1ZSA9IHVzZXIuaW5mby5hYm91dDtcbiAgcHJvZmlsZVZhbGlkYXRvci5kZWxldGVFcnJvcnMoKVxuICBibG9ja1BvcHVwUHJvZmlsZVdpdGhGb3JtLm9wZW4oKVxufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhLCB1c2VyKXtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkIChkYXRhLCB1c2VyLCB1dGlscy5lbGVtZW50VGVtcGxldGUsXG4gICAgXG4gICAgKCk9PntcbiAgICAgIGltYWdlLm9wZW4oZGF0YS5uYW1lLCBkYXRhLmxpbmspXG4gICAgfSxcblxuICAgIChlbGVtZW50KT0+e1xuICAgICAgcG9wdXBDb25maXJtLm9wZW4oKVxuICAgICAgcG9wdXBDb25maXJtLnNldEVsZW1lbnQoZWxlbWVudClcbiAgICB9LFxuICAgIFxuICAgICgpPT57XG4gICAgICBpZihjYXJkLmdldExpa2UoKSl7XG4gICAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmQuZ2V0SWQoKSlcbiAgICAgICAgICAudGhlbigoZGF0YSk9PntcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXMoZGF0YS5saWtlcylcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpPT57XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwJywgZXJyIClcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgYXBpLmFkZExpa2UoY2FyZC5nZXRJZCgpKVxuICAgICAgICAgIC50aGVuKChkYXRhKT0+e1xuICAgICAgICAgICAgY2FyZC5zZXRMaWtlcyhkYXRhLmxpa2VzKVxuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcygpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycik9PntcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LAg0YHQtdGA0LLQtdGA0LAnLCBlcnIgKVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIClcblxuXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkLmNyZWF0ZUVsZW1lbnQoKVxuXG4gIHJldHVybiBlbGVtZW50XG59XG5cbmZ1bmN0aW9uIG9wZW5BZGRQb3B1cCgpIHtcbiAgYWRkVmFsaWRhdG9yLmRlbGV0ZUVycm9ycygpXG4gIGFkZFZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpXG4gIGJsb2NrUG9wdXBBZGRXaXRoRm9ybS5vcGVuKClcbn07XG5cbmZ1bmN0aW9uIG9wZW5FZGl0QXZhdGFyUG9wdXAoKSB7XG4gIGF2YXRhclZhbGlkYXRvci5kZWxldGVFcnJvcnMoKVxuICBibG9ja1BvcHVwRWRpdEF2YXRhci5vcGVuKClcbn07XG5cblxuXG51dGlscy5idXR0b25PcGVuUG9wdXBBZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BZGRQb3B1cCk7XG51dGlscy5idXR0b25PcGVuUG9wdXBQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRWRpdFBvcHVwKTtcbnV0aWxzLmJ1dHRvbk9wZW5Qb3B1cEF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRBdmF0YXJQb3B1cCk7XG5cbmFkZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcbnByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5ibG9ja1BvcHVwUHJvZmlsZVdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKClcbmJsb2NrUG9wdXBBZGRXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpXG5pbWFnZS5zZXRFdmVudExpc3RlbmVycygpXG5wb3B1cENvbmZpcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKVxuYXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxuYmxvY2tQb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5cblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VyKCksIGFwaS5nZXRBbGxDYXJkcygpXSlcbiAgLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHJlc3VsdHNbMF0pXG4gICAgY2FyZHNTZWN0aW9uLnJlbmRlckl0ZW1zKHtpdGVtczogcmVzdWx0c1sxXSwgdXNlcjogcmVzdWx0c1swXX0pXG4gICAgdXRpbHMudXNlckRhdGEuZGF0YSA9IHJlc3VsdHNbMF1cbiAgfSlcbiAgLmNhdGNoKChlcnIpPT57XG4gICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDRgdC10YDQstC10YDQsCcsIGVyciApXG4gIH0pXG5cbiAgXG4iXSwibmFtZXMiOlsiYnV0dG9uT3BlblBvcHVwUHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJsb2NrUG9wdXBQcm9maWxlIiwiZm9ybVBvcHVwUHJvZmlsZSIsIm5hbWVQb3B1cFByb2ZpbGUiLCJhYm91dFBvcHVwUHJvZmlsZSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwiY2FyZHNDb250YWluZXIiLCJlbGVtZW50VGVtcGxldGUiLCJjb250ZW50IiwiYnV0dG9uT3BlblBvcHVwQWRkIiwiYmxvY2tQb3B1cEFkZCIsImZvcm1Qb3B1cEFkZCIsImJsb2NrUG9wdXBJbWFnZSIsImJsb2NrUG9wdXBBdmF0YXIiLCJmb3JtUG9wdXBBdmF0YXIiLCJidXR0b25PcGVuUG9wdXBBdmF0YXIiLCJpbWFnZUF2YXRhciIsImJsb2NrUG9wdXBDb25maXJtIiwidXNlckRhdGEiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwb3B1cEVycm9yVHlwZSIsIkNhcmQiLCJkYXRhIiwidXNlciIsInRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2xpY2tEZWxldGUiLCJoYW5kbGVDbGlja0xpa2UiLCJ0aGlzIiwiX2RhdGEiLCJfdXNlciIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVDbGlja0RlbGV0ZSIsIl9oYW5kbGVDbGlja0xpa2UiLCJjYXJkIiwiY2xvbmVOb2RlIiwiX2VsZW1lbnRJbWFnZSIsIl9lbGVtZW50TmFtZSIsIl9lbGVtZW50TGlrZXMiLCJ0ZXh0Q29udGVudCIsInNldEF0dHJpYnV0ZSIsIl9lbGVtZW50QnV0dG9uRGVsIiwiX2VsZW1lbnRCdXR0b25MaWtlIiwiX2JpbmREZWxldGVIYW5kbGVyIiwiX2JpbmRMaWtlSGFuZGxlciIsIl9iaW5kT3BlbkhhbmRsZXIiLCJzZXRMaWtlcyIsIm93bmVyIiwiX2lkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic29tZSIsInRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsImxlbmd0aCIsIkZvcm1WYWxpZGF0b3IiLCJjbGFzc2VzIiwiZm9ybSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9mb3JtIiwiX2NsYXNzZXMiLCJpZCIsImFkZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0TGlzdCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2J1dHRvbkVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhc0ludmFsaWRJbnB1dCIsInJlbW92ZUF0dHJpYnV0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXAiLCJfYnV0dG9uQ2xvc2VQb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJldmVudCIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsImNhcmROYW1lIiwiY2FyZEltYWdlIiwiUG9wdXBXaXRoRm9ybSIsImNhbGxiYWNrIiwiX2NhbGxiYWNrIiwiaW5wdXRzIiwiYnV0dG9uU2F2ZSIsIl92YWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwQ29uZmlybSIsIl9jb25maXJtQnV0dG9tIiwiX2VsZW1lbnQiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckFib3V0IiwiYXZhdGFyIiwiX3VzZXJOYW1lIiwiX3VzZXJBYm91dCIsIl9hdmF0YXIiLCJpbmZvIiwiYWJvdXQiLCJhcGkiLCJjb25maWciLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwiX29uUmVzcG9uY2UiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImlkQ2FyZCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJtYXNzYWdlIiwiYXV0aG9yaXphdGlvbiIsImFkZFZhbGlkYXRvciIsInV0aWxzIiwicHJvZmlsZVZhbGlkYXRvciIsImF2YXRhclZhbGlkYXRvciIsImJsb2NrUG9wdXBQcm9maWxlV2l0aEZvcm0iLCJ2YWx1ZXMiLCJlZGl0VXNlciIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImJsb2NrUG9wdXBBZGRXaXRoRm9ybSIsImFkZENhcmQiLCJjYXJkc1NlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsImJsb2NrUG9wdXBFZGl0QXZhdGFyIiwiZWRpdEF2YXRhciIsImltYWdlIiwicG9wdXBDb25maXJtIiwiZGVsZXRlQ2FyZCIsImdldElkIiwicmVtb3ZlQ2FyZCIsIm9wZW4iLCJzZXRFbGVtZW50IiwiZ2V0TGlrZSIsImRlbGV0ZUxpa2UiLCJ1cGRhdGVMaWtlcyIsImFkZExpa2UiLCJjcmVhdGVFbGVtZW50IiwiZGVsZXRlRXJyb3JzIiwiZ2V0VXNlckluZm8iLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhbGwiLCJnZXRVc2VyIiwiZ2V0QWxsQ2FyZHMiLCJyZXN1bHRzIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9