(()=>{"use strict";var e=document.querySelector(".profile__edit-button"),t=document.querySelector(".popup_type_edit"),n=t.querySelector(".popup__form"),r=t.querySelector(".popup__input_value_name"),o=t.querySelector(".popup__input_value_about"),i=document.querySelector(".profile__name"),u=document.querySelector(".profile__about"),c=document.querySelector(".elements"),a=document.querySelector("#element-template").content.querySelector(".element"),s=document.querySelector(".profile__add-button"),l=document.querySelector(".popup_type_add"),f=l.querySelector(".popup__form"),p=document.querySelector(".popup_type_image"),h=document.querySelector(".popup_type_avatar"),_=h.querySelector(".popup__form"),d=document.querySelector(".profile__avatar-button"),y=document.querySelector(".profile__image"),v=document.querySelector(".popup_type_confirm"),b={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_active",inputErrorClass:"popup__input_error",errorClass:"popup__error_active",popupErrorType:".popup__error_type_"};function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n,r,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._user=n,this._name=t.name,this._link=t.link,this._likes=t.likes,this._template=r,this._handleCardClick=o,this._handleClickDelete=i,this._handleClickLike=u}var t,n;return t=e,(n=[{key:"createElement",value:function(){var e=this;return this.card=this._template.cloneNode(!0),this._elementImage=this.card.querySelector(".element__image"),this._elementName=this.card.querySelector(".element__name"),this._elementLikes=this.card.querySelector(".element__likes"),this._elementName.textContent=this._name,this._elementImage.setAttribute("src",this._link),this._elementImage.setAttribute("alt",this._name),this._elementButtonDel=this.card.querySelector(".element__remove"),this._elementButtonLike=this.card.querySelector(".element__like"),this._bindDeleteHandler(),this._bindLikeHandler(),this._bindOpenHandler(),this.setLikes(this._likes),this._data.owner._id===this._user._id&&this._elementButtonDel.classList.remove("element__remove_inactive"),this._likes.some((function(t){return t._id===e._user._id}))&&this._elementButtonLike.classList.toggle("element__like_active"),this.card}},{key:"_bindDeleteHandler",value:function(){var e=this;this._elementButtonDel.addEventListener("click",(function(){e._handleClickDelete(e)}))}},{key:"_bindLikeHandler",value:function(){var e=this;this._elementButtonLike.addEventListener("click",(function(){e._handleClickLike()}))}},{key:"_bindOpenHandler",value:function(){this._elementImage.addEventListener("click",this._handleCardClick)}},{key:"getId",value:function(){return this._data._id}},{key:"removeCard",value:function(){this.card.remove(),this.card=null}},{key:"getLike",value:function(){return!!this._elementButtonLike.classList.contains("element__like_active")}},{key:"setLikes",value:function(e){this._elementLikes.textContent=e.length}},{key:"updateLikes",value:function(){this._elementButtonLike.classList.toggle("element__like_active")}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"_showInputError",(function(e,t){var n=r._form.querySelector("".concat(r._classes.popupErrorType).concat(e.id));e.classList.add(r._classes.inputErrorClass),n.textContent=t,n.classList.add(r._classes.errorClass)})),E(this,"_hideInputError",(function(e){var t=r._form.querySelector("".concat(r._classes.popupErrorType).concat(e.id));e.classList.remove(r._classes.inputErrorClass),t.classList.remove(r._classes.errorClass),t.textContent=""})),E(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),E(this,"_setEventListeners",(function(){return r.toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r.toggleButtonState(r._inputList,r._buttonElement)}))})),r._buttonElement})),E(this,"enableValidation",(function(){r._setEventListeners()})),this._classes=t,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._classes.inputSelector)),this._buttonElement=this._form.querySelector(this._classes.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._classes.inactiveButtonClass)):(this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.add(this._classes.inactiveButtonClass))}},{key:"deleteErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n}var t,n;return t=e,n=[{key:"renderItems",value:function(e,t){var n=this;e.forEach((function(e){n._renderer(e,t)}))}},{key:"addItem",value:function(e){this._container.append(e)}}],n&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._buttonClosePopup=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_is-opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_is-opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._buttonClosePopup.addEventListener("click",(function(t){e.close(e._popup)})),this._popup.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close(e._popup)}))}}])&&L(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},R.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function B(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._name=t._popup.querySelector(".popup__image-name"),t._image=t._popup.querySelector(".popup__image"),t}return t=u,(n=[{key:"open",value:function(e,t){this._name.textContent=e,this._image.setAttribute("src",t),this._image.setAttribute("alt",e),R(T(u.prototype),"open",this).call(this)}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(C);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=U(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function U(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function V(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(r);if(o){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return V(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._callback=t,n._form=n._popup.querySelector(".popup__form"),n.inputs=n._form.querySelectorAll(".popup__input"),n.buttonSave=n._popup.querySelector(".popup__save"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._values={},this.inputs.forEach((function(t){e._values[t.name]=t.value})),this._values}},{key:"setEventListeners",value:function(){var e=this;N(J(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._callback(e._getInputValues())}))}},{key:"close",value:function(){N(J(u.prototype),"close",this).call(this),this._form.reset()}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(C);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=K(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},G.apply(this,arguments)}function K(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function W(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(r);if(o){var n=X(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return W(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._callback=t,n._confirmButtom=n._popup.querySelector(".popup__confirm"),n}return t=u,(n=[{key:"setEventListeners",value:function(){var e=this;G(X(u.prototype),"setEventListeners",this).call(this),this._confirmButtom.addEventListener("click",(function(t){e._callback(e._element)}))}},{key:"setElement",value:function(e){this._element=e}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(C);function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){var n=t.userName,r=t.userAbout,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userAbout=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this.info={name:this._userName.textContent,about:this._userAbout.textContent},this.info}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userAbout.textContent=e.about,this._avatar.setAttribute("src",e.avatar)}}])&&Z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var te=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers,this._id=t.id,this._link="".concat(this._url,"/v1/").concat(this._id)}var t,n;return t=e,(n=[{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._link,"/cards"),{headers:this._headers}).then((function(t){return e._onResponce(t)}))}},{key:"getUser",value:function(){var e=this;return fetch("".concat(this._link,"/users/me"),{headers:this._headers}).then((function(t){return e._onResponce(t)}))}},{key:"editUser",value:function(e,t){var n=this;return fetch("".concat(this._link,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._onResponce(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._link,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._onResponce(e)}))}},{key:"addCard",value:function(e,t){var n=this;return fetch("".concat(this._link,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._onResponce(e)}))}},{key:"_onResponce",value:function(e){return e.ok?e.json():Promise.reject({massage:"Ошибка на сервере",res:e})}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._link,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._onResponce(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._link,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._onResponce(e)}))}},{key:"editAvatar",value:function(e){var t=this;return fetch("".concat(this._link,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._onResponce(e)}))}}])&&ee(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({id:"cohort-51",url:"https://mesto.nomoreparties.co",headers:{authorization:"c544db48-3dd6-45bf-8d5d-369e754e242d","Content-Type":"application/json"}}),ne=new w(b,f),re=new w(b,n),oe=new w(b,_),ie=new $({userName:i,userAbout:u,avatar:y}),ue=new z(t,(function(e){ue.buttonSave.textContent="Сохранение...",ue.close(),re.toggleButtonState(),te.editUser(e.name,e.about).then((function(e){ie.setUserInfo(e)})).catch((function(e){console.log("Ошибка сервера",e)})).finally((function(){ue.buttonSave.textContent="Сохраненить"}))})),ce=new z(l,(function(e){ce.buttonSave.textContent="Сохранение...",te.addCard(e.name,e.link).then((function(e){fe.addItem(pe(e)),ce.close(),ne.toggleButtonState()})).catch((function(e){console.log("Ошибка сервера",e)})).finally((function(){ce.buttonSave.textContent="Сохраненить"}))})),ae=new z(h,(function(e){ae.buttonSave.textContent="Сохранение...",te.editAvatar(e.avatar).then((function(e){ie.setUserInfo(e),ae.close(),oe.toggleButtonState()})).catch((function(e){console.log("Ошибка сервера",e)})).finally((function(){ae.buttonSave.textContent="Сохраненить"}))})),se=new x(p),le=new Y(v,(function(e){te.deleteCard(e.getId()).then((function(){e.removeCard(),le.close()})).catch((function(e){console.log("Ошибка сервера",e)}))})),fe=new S({renderer:function(e,t){var n=pe(e,t);fe.addItem(n)}},c);function pe(e,t){var n=new k(e,t,a,(function(){se.open(e.name,e.link)}),(function(e){le.open(),le.setElement(e)}),(function(){n.getLike()?te.deleteLike(n.getId()).then((function(e){n.setLikes(e.likes),n.updateLikes()})).catch((function(e){console.log("Ошибка сервера",e)})):te.addLike(n.getId()).then((function(e){n.setLikes(e.likes),n.updateLikes()})).catch((function(e){console.log("Ошибка сервера",e)}))}));return n.createElement()}s.addEventListener("click",(function(){ne.deleteErrors(),ne.toggleButtonState(),ce.open()})),e.addEventListener("click",(function(){ie.getUserInfo(),r.value=ie.info.name,o.value=ie.info.about,re.deleteErrors(),ue.open()})),d.addEventListener("click",(function(){oe.deleteErrors(),ae.open()})),ne.enableValidation(),re.enableValidation(),ue.setEventListeners(),ce.setEventListeners(),se.setEventListeners(),le.setEventListeners(),oe.enableValidation(),ae.setEventListeners(),Promise.all([te.getUser(),te.getAllCards()]).then((function(e){ie.setUserInfo(e[0]),fe.renderItems(e[1],e[0])})).catch((function(e){console.log("Ошибка сервера",e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVF3QyxJQUFJLENBQUN6RCxHQUFJMEQsVUFBVzFELEdBQUkyRCxnQkFDN0JwRCxNQUFLLFNBQUNxRCxHQUNML0ssR0FBSytJLFlBQVlnQyxFQUFRLElBRXpCeEIsR0FBUXlCLFlBQVlELEVBQVEsR0FBR0EsRUFBUSxHQUN4QyxJQUNBL0IsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJLGlCQUFrQkYsRUFDL0IsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBidXR0b25PcGVuUG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGJsb2NrUG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBmb3JtUG9wdXBQcm9maWxlID0gYmxvY2tQb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBuYW1lUG9wdXBQcm9maWxlID0gYmxvY2tQb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdmFsdWVfbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFib3V0UG9wdXBQcm9maWxlID0gYmxvY2tQb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdmFsdWVfYWJvdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWJvdXRcIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKVxyXG5leHBvcnQgY29uc3QgZWxlbWVudFRlbXBsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50LXRlbXBsYXRlXCIpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpXHJcblxyXG5leHBvcnQgY29uc3QgYnV0dG9uT3BlblBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgYmxvY2tQb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBmb3JtUG9wdXBBZGQgPSBibG9ja1BvcHVwQWRkLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcblxyXG5leHBvcnQgY29uc3QgYmxvY2tQb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJsb2NrUG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgZm9ybVBvcHVwQXZhdGFyPSBibG9ja1BvcHVwQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuUG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBpbWFnZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcblxyXG5leHBvcnQgY29uc3QgYmxvY2tQb3B1cENvbmZpcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfY29uZmlybVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVfYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfYWN0aXZlJyxcclxuICBwb3B1cEVycm9yVHlwZTonLnBvcHVwX19lcnJvcl90eXBlXydcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmYgPSB7XHJcbiAgaWQ6IFwiY29ob3J0LTUxXCIsXHJcbiAgdXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jb1wiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICdjNTQ0ZGI0OC0zZGQ2LTQ1YmYtOGQ1ZC0zNjllNzU0ZTI0MmQnLFxyXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gIH1cclxufSIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICB1c2VyLFxuICAgIHRlbXBsYXRlLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVDbGlja0RlbGV0ZSxcbiAgICBoYW5kbGVDbGlja0xpa2VcbiAgKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fdXNlciA9IHVzZXI7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDbGlja0RlbGV0ZSA9IGhhbmRsZUNsaWNrRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUNsaWNrTGlrZSA9IGhhbmRsZUNsaWNrTGlrZTtcbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgdGhpcy5jYXJkID0gdGhpcy5fdGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2VsZW1lbnRJbWFnZSA9IHRoaXMuY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2VsZW1lbnROYW1lID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbmFtZVwiKTtcbiAgICB0aGlzLl9lbGVtZW50TGlrZXMgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlc1wiKTtcblxuICAgIHRoaXMuX2VsZW1lbnROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX2xpbmspO1xuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XG5cbiAgICB0aGlzLl9lbGVtZW50QnV0dG9uRGVsID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fcmVtb3ZlXCIpO1xuICAgIHRoaXMuX2VsZW1lbnRCdXR0b25MaWtlID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZVwiKTtcblxuICAgIHRoaXMuX2JpbmREZWxldGVIYW5kbGVyKCk7XG4gICAgdGhpcy5fYmluZExpa2VIYW5kbGVyKCk7XG4gICAgdGhpcy5fYmluZE9wZW5IYW5kbGVyKCk7XG4gICAgdGhpcy5zZXRMaWtlcyh0aGlzLl9saWtlcyk7XG5cbiAgICBpZiAodGhpcy5fZGF0YS5vd25lci5faWQgPT09IHRoaXMuX3VzZXIuX2lkKSB7XG4gICAgICB0aGlzLl9lbGVtZW50QnV0dG9uRGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19yZW1vdmVfaW5hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5fbGlrZXMuc29tZSgob3duZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIG93bmVyLl9pZCA9PT0gdGhpcy5fdXNlci5faWQ7XG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5fZWxlbWVudEJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhcmQ7XG4gIH1cblxuICBfYmluZERlbGV0ZUhhbmRsZXIoKSB7XG4gICAgdGhpcy5fZWxlbWVudEJ1dHRvbkRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2xpY2tEZWxldGUodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfYmluZExpa2VIYW5kbGVyKCkge1xuICAgIHRoaXMuX2VsZW1lbnRCdXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDbGlja0xpa2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9iaW5kT3BlbkhhbmRsZXIoKSB7XG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xuICB9XG5cbiAgZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEuX2lkO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZCgpIHtcbiAgICB0aGlzLmNhcmQucmVtb3ZlKCk7XG4gICAgdGhpcy5jYXJkID0gbnVsbDtcbiAgfVxuXG4gIGdldExpa2UoKSB7XG4gICAgaWYgKHRoaXMuX2VsZW1lbnRCdXR0b25MaWtlLmNsYXNzTGlzdC5jb250YWlucyhcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHNldExpa2VzKGxpa2VzKSB7XG4gICAgdGhpcy5fZWxlbWVudExpa2VzLnRleHRDb250ZW50ID0gbGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgdXBkYXRlTGlrZXMoKSB7XG4gICAgdGhpcy5fZWxlbWVudEJ1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNsYXNzZXMsIGZvcm0pIHtcbiAgICB0aGlzLl9jbGFzc2VzID0gY2xhc3NlcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NsYXNzZXMuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jbGFzc2VzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAke3RoaXMuX2NsYXNzZXMucG9wdXBFcnJvclR5cGV9JHtpbnB1dEVsZW1lbnQuaWR9YFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY2xhc3Nlcy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jbGFzc2VzLmVycm9yQ2xhc3MpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgJHt0aGlzLl9jbGFzc2VzLnBvcHVwRXJyb3JUeXBlfSR7aW5wdXRFbGVtZW50LmlkfWBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NsYXNzZXMuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jbGFzc2VzLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dExpc3QsIHRoaXMuX2J1dHRvbkVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2J1dHRvbkVsZW1lbnQ7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY2xhc3Nlcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jbGFzc2VzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZUVycm9ycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKXtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMsIHVzZXIpIHtcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgdXNlcik7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG4gIFxufVxuXG5cbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcbiAgICB0aGlzLl9idXR0b25DbG9zZVBvcHVwID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfaXMtb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9pcy1vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2VQb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKHRoaXMuX3BvcHVwKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSh0aGlzLl9wb3B1cCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xuICAgIHN1cGVyKHBvcHVwKTtcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtbmFtZVwiKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICB9XG5cbiAgb3BlbihjYXJkTmFtZSwgY2FyZEltYWdlKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGNhcmROYW1lO1xuICAgIHRoaXMuX2ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBjYXJkSW1hZ2UpO1xuICAgIHRoaXMuX2ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBjYXJkTmFtZSk7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyB1dGlscyBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy5qc1wiO1xuaW1wb3J0ICogYXMgaW5kZXggZnJvbSBcIi4uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCwgY2FsbGJhY2spIHtcbiAgICBzdXBlcihwb3B1cCk7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLmlucHV0cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgdGhpcy5idXR0b25TYXZlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc2F2ZVwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl92YWx1ZXMgPSB7fTtcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fY2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCwgY2FsbGJhY2spIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICB0aGlzLl9jb25maXJtQnV0dG9tID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY29uZmlybVwiKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2NvbmZpcm1CdXR0b20uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9jYWxsYmFjayh0aGlzLl9lbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RWxlbWVudChlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgdGhpcy5fdXNlckFib3V0ID0gdXNlckFib3V0O1xuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuaW5mbyA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICB0aGlzLl9hdmF0YXIuc2V0QXR0cmlidXRlKFwic3JjXCIsIGRhdGEuYXZhdGFyKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnKXtcclxuICAgIHRoaXMuX3VybCA9IGNvbmZpZy51cmxcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBjb25maWcuaGVhZGVyc1xyXG4gICAgdGhpcy5faWQgPSBjb25maWcuaWRcclxuICAgIHRoaXMuX2xpbmsgPSBgJHt0aGlzLl91cmx9L3YxLyR7dGhpcy5faWR9YFxyXG4gIH1cclxuXHJcbiAgZ2V0QWxsQ2FyZHMoKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9saW5rfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpPT57XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29uUmVzcG9uY2UocmVzKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldFVzZXIoKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9saW5rfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpPT57XHJcbiAgICAgIHJldHVybiB0aGlzLl9vblJlc3BvbmNlKHJlcylcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBlZGl0VXNlcihuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpPT57XHJcbiAgICAgIHJldHVybiB0aGlzLl9vblJlc3BvbmNlKHJlcylcclxuICAgIH0pOyAgXHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkQ2FyZCl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vY2FyZHMvJHtpZENhcmR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcyk9PntcclxuICAgICAgcmV0dXJuIHRoaXMuX29uUmVzcG9uY2UocmVzKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFkZENhcmQobmFtZSwgbGluayl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fbGlua30vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcyk9PntcclxuICAgICAgcmV0dXJuIHRoaXMuX29uUmVzcG9uY2UocmVzKVxyXG4gICAgfSk7IFxyXG4gIH1cclxuXHJcbiAgX29uUmVzcG9uY2UocmVzKXtcclxuICAgIGlmKHJlcy5vayl7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoe21hc3NhZ2U6ICfQntGI0LjQsdC60LAg0L3QsCDRgdC10YDQstC10YDQtScsIHJlc30pXHJcbiAgfVxyXG5cclxuYWRkTGlrZShpZENhcmQpe1xyXG4gIHJldHVybiBmZXRjaChgJHt0aGlzLl9saW5rfS9jYXJkcy8ke2lkQ2FyZH0vbGlrZXNgLCB7XHJcbiAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICB9KVxyXG4gIC50aGVuKChyZXMpPT57XHJcbiAgICByZXR1cm4gdGhpcy5fb25SZXNwb25jZShyZXMpXHJcbiAgfSk7IFxyXG59XHJcblxyXG5kZWxldGVMaWtlKGlkQ2FyZCl7XHJcbiAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L2NhcmRzLyR7aWRDYXJkfS9saWtlc2AsIHtcclxuICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gIH0pXHJcbiAgLnRoZW4oKHJlcyk9PntcclxuICAgIHJldHVybiB0aGlzLl9vblJlc3BvbmNlKHJlcylcclxuICB9KTsgXHJcbn1cclxuXHJcbmVkaXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2xpbmt9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIGF2YXRhcjogYXZhdGFyXHJcbiAgICB9KVxyXG4gIH0pXHJcbiAgLnRoZW4oKHJlcyk9PntcclxuICAgIHJldHVybiB0aGlzLl9vblJlc3BvbmNlKHJlcylcclxuICB9KTsgIFxyXG59XHJcblxyXG59IiwiaW1wb3J0ICcuL3BhZ2VzL2luZGV4LmNzcydcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gXCIuL3NjcmlwdHMvdXRpbHMuanNcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9zY3JpcHRzL0NhcmQuanNcIjtcbmltcG9ydCB7Rm9ybVZhbGlkYXRvcn0gZnJvbSBcIi4vc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzXCJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9zY3JpcHRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4vc2NyaXB0cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHsgUG9wdXBDb25maXJtIH0gZnJvbSAnLi9zY3JpcHRzL1BvcHVwQ29uZmlybS5qcyc7XG5pbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuL3NjcmlwdHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuL3NjcmlwdHMvQXBpLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkgKHV0aWxzLmNvbmYpXG5jb25zdCBhZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih1dGlscy52YWxpZGF0aW9uQ29uZmlnLCB1dGlscy5mb3JtUG9wdXBBZGQpXG5jb25zdCBwcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodXRpbHMudmFsaWRhdGlvbkNvbmZpZywgdXRpbHMuZm9ybVBvcHVwUHJvZmlsZSlcbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHV0aWxzLnZhbGlkYXRpb25Db25maWcsIHV0aWxzLmZvcm1Qb3B1cEF2YXRhcilcblxuZXhwb3J0IGNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe3VzZXJOYW1lOiB1dGlscy5wcm9maWxlTmFtZSwgdXNlckFib3V0OiB1dGlscy5wcm9maWxlQWJvdXQsIGF2YXRhcjogdXRpbHMuaW1hZ2VBdmF0YXJ9KVxuXG5jb25zdCBibG9ja1BvcHVwUHJvZmlsZVdpdGhGb3JtICA9IG5ldyBQb3B1cFdpdGhGb3JtICh1dGlscy5ibG9ja1BvcHVwUHJvZmlsZSwgKHZhbHVlcyk9PntcblxuICBibG9ja1BvcHVwUHJvZmlsZVdpdGhGb3JtLmJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCJcbiAgYmxvY2tQb3B1cFByb2ZpbGVXaXRoRm9ybS5jbG9zZSgpXG4gIHByb2ZpbGVWYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICBcbiAgYXBpLmVkaXRVc2VyKHZhbHVlcy5uYW1lLCB2YWx1ZXMuYWJvdXQpXG4gIC50aGVuKChkYXRhKT0+e1xuICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSlcbiAgfSlcbiAgLmNhdGNoKChlcnIpPT57XG4gICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDRgdC10YDQstC10YDQsCcsIGVyciApXG4gIH0pXG4gIC5maW5hbGx5KCgpPT57XG4gICAgYmxvY2tQb3B1cFByb2ZpbGVXaXRoRm9ybS5idXR0b25TYXZlLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjRgtGMXCJcbiAgfSlcblxufSlcblxuY29uc3QgYmxvY2tQb3B1cEFkZFdpdGhGb3JtICA9IG5ldyBQb3B1cFdpdGhGb3JtICh1dGlscy5ibG9ja1BvcHVwQWRkLCAodmFsdWVzKT0+e1xuXG5ibG9ja1BvcHVwQWRkV2l0aEZvcm0uYnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIlxuYXBpLmFkZENhcmQodmFsdWVzLm5hbWUsIHZhbHVlcy5saW5rKVxuLnRoZW4oKGRhdGEpPT57XG4gIHNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkIChkYXRhKSlcbiAgYmxvY2tQb3B1cEFkZFdpdGhGb3JtLmNsb3NlKClcbiAgYWRkVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKClcbn0pXG4uY2F0Y2goKGVycik9PntcbiAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDRgdC10YDQstC10YDQsCcsIGVyciApXG59KVxuLmZpbmFsbHkoKCk9PntcbiAgYmxvY2tQb3B1cEFkZFdpdGhGb3JtLmJ1dHRvblNhdmUudGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNGC0YxcIlxufSlcblxufSlcblxuY29uc3QgYmxvY2tQb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSAodXRpbHMuYmxvY2tQb3B1cEF2YXRhciwgKHZhbHVlcyk9PntcblxuICBibG9ja1BvcHVwRWRpdEF2YXRhci5idXR0b25TYXZlLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiXG4gIGFwaS5lZGl0QXZhdGFyKHZhbHVlcy5hdmF0YXIpXG4gIC50aGVuKChkYXRhKT0+e1xuICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSlcbiAgICBibG9ja1BvcHVwRWRpdEF2YXRhci5jbG9zZSgpXG4gICAgYXZhdGFyVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKClcbiAgfSlcbiAgLmNhdGNoKChlcnIpPT57XG4gICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDRgdC10YDQstC10YDQsCcsIGVyciApXG4gIH0pXG4gIC5maW5hbGx5KCgpPT57XG4gICAgYmxvY2tQb3B1cEVkaXRBdmF0YXIuYnV0dG9uU2F2ZS50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40YLRjFwiXG4gIH0pXG4gIFxuICB9KVxuXG5jb25zdCBpbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSh1dGlscy5ibG9ja1BvcHVwSW1hZ2UpXG5cbmNvbnN0IHBvcHVwQ29uZmlybSA9IG5ldyBQb3B1cENvbmZpcm0gKHV0aWxzLmJsb2NrUG9wdXBDb25maXJtLChlbGVtZW50KT0+e1xuICBhcGkuZGVsZXRlQ2FyZChlbGVtZW50LmdldElkKCkpXG4gIC50aGVuKCgpPT57XG4gICAgZWxlbWVudC5yZW1vdmVDYXJkKClcbiAgICBwb3B1cENvbmZpcm0uY2xvc2UoKVxuICB9KVxuICAuY2F0Y2goKGVycik9PntcbiAgICBjb25zb2xlLmxvZygn0J7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwJywgZXJyIClcbiAgfSlcbn0pXG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoZWxlbWVudCwgdXNlcik9PntcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChlbGVtZW50LCB1c2VyKVxuICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkKVxuICAgIH1cbiAgfSxcbiAgdXRpbHMuY2FyZHNDb250YWluZXJcbilcblxuXG5cbmZ1bmN0aW9uIG9wZW5FZGl0UG9wdXAoKSB7XG4gIHVzZXIuZ2V0VXNlckluZm8oKVxuICB1dGlscy5uYW1lUG9wdXBQcm9maWxlLnZhbHVlID0gdXNlci5pbmZvLm5hbWU7XG4gIHV0aWxzLmFib3V0UG9wdXBQcm9maWxlLnZhbHVlID0gdXNlci5pbmZvLmFib3V0O1xuICBwcm9maWxlVmFsaWRhdG9yLmRlbGV0ZUVycm9ycygpXG4gIGJsb2NrUG9wdXBQcm9maWxlV2l0aEZvcm0ub3BlbigpXG59O1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEsIHVzZXIpe1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQgKGRhdGEsIHVzZXIsIHV0aWxzLmVsZW1lbnRUZW1wbGV0ZSxcbiAgICBcbiAgICAoKT0+e1xuICAgICAgaW1hZ2Uub3BlbihkYXRhLm5hbWUsIGRhdGEubGluaylcbiAgICB9LFxuXG4gICAgKGVsZW1lbnQpPT57XG4gICAgICBwb3B1cENvbmZpcm0ub3BlbigpXG4gICAgICBwb3B1cENvbmZpcm0uc2V0RWxlbWVudChlbGVtZW50KVxuICAgIH0sXG4gICAgXG4gICAgKCk9PntcbiAgICAgIGlmKGNhcmQuZ2V0TGlrZSgpKXtcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UoY2FyZC5nZXRJZCgpKVxuICAgICAgICAudGhlbigoZGF0YSk9PntcbiAgICAgICAgICBjYXJkLnNldExpa2VzKGRhdGEubGlrZXMpXG4gICAgICAgICAgY2FyZC51cGRhdGVMaWtlcygpXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKT0+e1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LAg0YHQtdGA0LLQtdGA0LAnLCBlcnIgKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZWxzZXtcbiAgICAgICAgYXBpLmFkZExpa2UoY2FyZC5nZXRJZCgpKVxuICAgICAgICAudGhlbigoZGF0YSk9PntcbiAgICAgICAgICBjYXJkLnNldExpa2VzKGRhdGEubGlrZXMpXG4gICAgICAgICAgY2FyZC51cGRhdGVMaWtlcygpXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKT0+e1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfQntGI0LjQsdC60LAg0YHQtdGA0LLQtdGA0LAnLCBlcnIgKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICApXG5cblxuICBjb25zdCBlbGVtZW50ID0gY2FyZC5jcmVhdGVFbGVtZW50KClcblxuICByZXR1cm4gZWxlbWVudFxufVxuXG5mdW5jdGlvbiBvcGVuQWRkUG9wdXAoKSB7XG4gIGFkZFZhbGlkYXRvci5kZWxldGVFcnJvcnMoKVxuICBhZGRWYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKVxuICBibG9ja1BvcHVwQWRkV2l0aEZvcm0ub3BlbigpXG59O1xuXG5mdW5jdGlvbiBvcGVuRWRpdEF2YXRhclBvcHVwKCkge1xuICBhdmF0YXJWYWxpZGF0b3IuZGVsZXRlRXJyb3JzKClcbiAgYmxvY2tQb3B1cEVkaXRBdmF0YXIub3BlbigpXG59O1xuXG5cblxudXRpbHMuYnV0dG9uT3BlblBvcHVwQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuQWRkUG9wdXApO1xudXRpbHMuYnV0dG9uT3BlblBvcHVwUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkVkaXRQb3B1cCk7XG51dGlscy5idXR0b25PcGVuUG9wdXBBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5FZGl0QXZhdGFyUG9wdXApO1xuXG5hZGRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpXG5wcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKVxuYmxvY2tQb3B1cFByb2ZpbGVXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpXG5ibG9ja1BvcHVwQWRkV2l0aEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKVxuaW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKVxucG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKClcbmF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKClcbmJsb2NrUG9wdXBFZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKClcblxuXG5cblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VyKCksIGFwaS5nZXRBbGxDYXJkcygpXSlcbiAgLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHJlc3VsdHNbMF0pXG5cbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKHJlc3VsdHNbMV0scmVzdWx0c1swXSlcbiAgfSlcbiAgLmNhdGNoKChlcnIpPT57XG4gICAgY29uc29sZS5sb2coJ9Ce0YjQuNCx0LrQsCDRgdC10YDQstC10YDQsCcsIGVyciApXG4gIH0pXG5cbiAgXG4iXSwibmFtZXMiOlsiYnV0dG9uT3BlblBvcHVwUHJvZmlsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJsb2NrUG9wdXBQcm9maWxlIiwiZm9ybVBvcHVwUHJvZmlsZSIsIm5hbWVQb3B1cFByb2ZpbGUiLCJhYm91dFBvcHVwUHJvZmlsZSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwiY2FyZHNDb250YWluZXIiLCJlbGVtZW50VGVtcGxldGUiLCJjb250ZW50IiwiYnV0dG9uT3BlblBvcHVwQWRkIiwiYmxvY2tQb3B1cEFkZCIsImZvcm1Qb3B1cEFkZCIsImJsb2NrUG9wdXBJbWFnZSIsImJsb2NrUG9wdXBBdmF0YXIiLCJmb3JtUG9wdXBBdmF0YXIiLCJidXR0b25PcGVuUG9wdXBBdmF0YXIiLCJpbWFnZUF2YXRhciIsImJsb2NrUG9wdXBDb25maXJtIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicG9wdXBFcnJvclR5cGUiLCJDYXJkIiwiZGF0YSIsInVzZXIiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNsaWNrRGVsZXRlIiwiaGFuZGxlQ2xpY2tMaWtlIiwidGhpcyIsIl9kYXRhIiwiX3VzZXIiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl90ZW1wbGF0ZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlQ2xpY2tEZWxldGUiLCJfaGFuZGxlQ2xpY2tMaWtlIiwiY2FyZCIsImNsb25lTm9kZSIsIl9lbGVtZW50SW1hZ2UiLCJfZWxlbWVudE5hbWUiLCJfZWxlbWVudExpa2VzIiwidGV4dENvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJfZWxlbWVudEJ1dHRvbkRlbCIsIl9lbGVtZW50QnV0dG9uTGlrZSIsIl9iaW5kRGVsZXRlSGFuZGxlciIsIl9iaW5kTGlrZUhhbmRsZXIiLCJfYmluZE9wZW5IYW5kbGVyIiwic2V0TGlrZXMiLCJvd25lciIsIl9pZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNvbWUiLCJ0b2dnbGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udGFpbnMiLCJsZW5ndGgiLCJGb3JtVmFsaWRhdG9yIiwiY2xhc3NlcyIsImZvcm0iLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybSIsIl9jbGFzc2VzIiwiaWQiLCJhZGQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dExpc3QiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9idXR0b25FbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwiUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsIl9idXR0b25DbG9zZVBvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJjbG9zZSIsImV2ZW50IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiY2FyZE5hbWUiLCJjYXJkSW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwiY2FsbGJhY2siLCJfY2FsbGJhY2siLCJpbnB1dHMiLCJidXR0b25TYXZlIiwiX3ZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBDb25maXJtIiwiX2NvbmZpcm1CdXR0b20iLCJfZWxlbWVudCIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJhdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckFib3V0IiwiX2F2YXRhciIsImluZm8iLCJhYm91dCIsImFwaSIsImNvbmZpZyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJfb25SZXNwb25jZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiaWRDYXJkIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIm1hc3NhZ2UiLCJhdXRob3JpemF0aW9uIiwiYWRkVmFsaWRhdG9yIiwidXRpbHMiLCJwcm9maWxlVmFsaWRhdG9yIiwiYXZhdGFyVmFsaWRhdG9yIiwiYmxvY2tQb3B1cFByb2ZpbGVXaXRoRm9ybSIsInZhbHVlcyIsImVkaXRVc2VyIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwiYmxvY2tQb3B1cEFkZFdpdGhGb3JtIiwiYWRkQ2FyZCIsInNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsImJsb2NrUG9wdXBFZGl0QXZhdGFyIiwiZWRpdEF2YXRhciIsImltYWdlIiwicG9wdXBDb25maXJtIiwiZGVsZXRlQ2FyZCIsImdldElkIiwicmVtb3ZlQ2FyZCIsIm9wZW4iLCJzZXRFbGVtZW50IiwiZ2V0TGlrZSIsImRlbGV0ZUxpa2UiLCJ1cGRhdGVMaWtlcyIsImFkZExpa2UiLCJjcmVhdGVFbGVtZW50IiwiZGVsZXRlRXJyb3JzIiwiZ2V0VXNlckluZm8iLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhbGwiLCJnZXRVc2VyIiwiZ2V0QWxsQ2FyZHMiLCJyZXN1bHRzIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9